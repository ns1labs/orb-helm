# Copyright (c) Mainflux
# SPDX-License-Identifier: Apache-2.0
# Adapted for Orb project, modifications licensed under MPL v. 2.0:
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

defaults:
  logLevel: "info"
  image:
    pullPolicy: "IfNotPresent"
    repository: "ns1labs"
    tag: "develop"
    mfRepository: "mainflux"
    mfTag: "0.12.1"
    commitHash: "fba2689"
  # Replicas of MQTT adapter, NATS, Things, Envoy and Auth
  replicaCount: 3
  natsPort: 4222
  jaegerPort: 6831
  jaegerHost: ""

smtp:
  port: 25
  fromName: Orb

ingress:
  issuer: "letsencrypt-prod"
  hostname: ""
  secret: "orb-tls"

mqtt:
  enabled: true
  securityContext:
    runAsUser: 10000
    runAsGroup: 10000
    fsGroup: 10000
  adapter:
    image: { }
    mqttPort: 1884
    wsPort: 8081
    logLevel: "debug"
  broker:
    image: { }
    mqttPort: 1883
    wsPort: 8080
    logLevel: "info"
    persistentVolume:
      size: 5Gi
  redisESPort: 6379
  redisESHost: "" # Set this field with host if you want to point to external database such as Elasticache
  redisCachePort: 6379
  redisCacheHost: "" # Set this field with host if you want to point to external database such as Elasticache

users:
  image: { }
  dbPort: 5432
  dbHost: "" # Set this field with host if you want to point to external database such as RDS
  httpPort: 8180
  admin:
    secretName: orb-user-service
    emailSecretKey: adminEmail
    passwordSecretKey: adminPassword
  metadata:
    annotations: { }

fleet:
  image: { }
  dbPort: 5432
  dbHost: "" # Set this field with host if you want to point to external database such as RDS
  dbSSL: "disable"
  grpcPort: 8283
  httpPort: 8203
  redisESHost: "" # Set this field with host if you want to point to external database such as Elasticache
  redisESPort: 6379
  metadata:
    annotations: { }

policies:
  image: { }
  dbPort: 5432
  dbHost: "" # Set this field with host if you want to point to external database such as RDS
  dbSSL: "disable"
  grpcPort: 8282
  httpPort: 8202
  redisESPort: 6379
  redisESHost: "" # Set this field with host if you want to point to external database such as Elasticache
  metadata:
    annotations: { }

sinks:
  image: { }
  dbPort: 5432
  dbHost: "" # Set this field with host if you want to point to external database such as RDS
  dbSSL: "disable"
  grpcPort: 8280
  httpPort: 8200
  redisESPort: 6379
  redisESHost: "" # Set this field with host if you want to point to external database such as Elasticache
  metadata:
    annotations: { }

sinker:
  image: { }
  httpPort: 8201
  redisESPort: 6379
  redisESHost: "" # Set this field with host if you want to point to external database such as Elasticache
  metadata:
    annotations: { }

things:
  image: { }
  dbPort: 5432
  dbHost: "" # Set this field with host if you want to point to external database such as RDS
  httpPort: 8182
  authGrpcPort: 8183
  authHttpPort: 8989
  redisESPort: 6379
  redisESHost: "" # Set this field with host if you want to point to external database such as Elasticache
  redisCachePort: 6379
  redisCacheHost: "" # Set this field with host if you want to point to external database such as Elasticache
  metadata:
    annotations: { }

auth:
  image: { }
  dbPort: 5432
  dbHost: "" # Set this field with host if you want to point to external database such as RDS
  grpcPort: 8181
  httpPort: 8189
  jwt:
    secretName: orb-auth-service
    secretKey: jwtSecret
  metadata:
    annotations: { }

ui:
  image:
    name: orb-ui
  port: 3000
  metadata:
    annotations: { }

nats:
  auth:
    enabled: false
  clusterAuth:
    enabled: false
  maxPayload: 67108864
  replicaCount: 3

postgresql-users:
  enabled: true # dependency install, disable if you want to use external services
  name: postgresql-users
  postgresqlUsername: postgres
  postgresqlPassword: mainflux
  postgresqlDatabase: users
  resources:
    requests:
      cpu: 25m
  persistence:
    size: 1Gi

postgresql-fleet:
  enabled: true # dependency install, disable if you want to use external services
  name: postgresql-fleet
  image:
    tag: 13
  postgresqlUsername: postgres
  postgresqlPassword: orb
  postgresqlDatabase: fleet
  resources:
    requests:
      cpu: 25m
  persistence:
    size: 1Gi

postgresql-policies:
  enabled: true # dependency install, disable if you want to use external services
  name: postgresql-policies
  image:
    tag: 13
  postgresqlUsername: postgres
  postgresqlPassword: orb
  postgresqlDatabase: policies
  resources:
    requests:
      cpu: 25m
  persistence:
    size: 1Gi

postgresql-sinks:
  enabled: true # dependency install, disable if you want to use external services
  name: postgresql-sinks
  image:
    tag: 13
  postgresqlUsername: postgres
  postgresqlPassword: orb
  postgresqlDatabase: sinks
  resources:
    requests:
      cpu: 25m
  persistence:
    size: 1Gi

postgresql-things:
  enabled: true # dependency install, disable if you want to use external services
  name: postgresql-things
  postgresqlUsername: postgres
  postgresqlPassword: mainflux
  postgresqlDatabase: things
  resources:
    requests:
      cpu: 25m
  persistence:
    size: 1Gi

postgresql-auth:
  enabled: true # dependency install, disable if you want to use external services
  name: postgresql-auth
  postgresqlUsername: postgres
  postgresqlPassword: mainflux
  postgresqlDatabase: auth
  resources:
    requests:
      cpu: 25m
  persistence:
    size: 1Gi

redis-streams:
  enabled: true # dependency install, disable if you want to use external services
  volumePermissions:
    enabled: true
  cluster:
    enabled: false
  auth:
    enabled: false

redis-mqtt:
  enabled: true # dependency install, disable if you want to use external services
  volumePermissions:
    enabled: true
  cluster:
    enabled: false
  auth:
    enabled: false

redis-auth:
  enabled: true # dependency install, disable if you want to use external services
  cluster:
    enabled: false
  auth:
    enabled: false
  master:
    persistence:
      enabled: false

jaeger-operator:
  enabled: true # dependency install, disable if you want to use external services
  jaeger:
    create: true
  rbac:
    pspEnabled: true
    clusterRole: true

envoy:
  image:
    pullPolicy: "IfNotPresent"
    repository: "envoyproxy/envoy"
    tag: "v1.19.1"

nginx_internal:
  image:
    pullPolicy: "IfNotPresent"
    repository: "nginx"
    tag: "1.21.1"
